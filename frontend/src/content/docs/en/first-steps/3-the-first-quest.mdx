---
title: The First Quest
description: Finally, your first quest! What will it be...
---

import CodeQuestion from "@components/CodeQuestion.astro";
import Portrait from "@components/PortraitCard/PortraitCard.astro";
import Checkpoint from "@components/Checkpoint/Checkpoint.svelte";

export const replace = "Replace ? with your answer.";

Finally, your first quest!

What will it be?  
Kill some monsters? Rescue a lost princess?

Let's find out!

export const quest = 
`Welcome Adventurer.
Your first quest is... To assist the local grocery store!

We expect great things of you.
The Adventurer's Guild`;

<CodeQuestion
  id="3-1"
  code="read_quest()"
  validator={`() => \`${quest}SUCCESS\n\``}
  editable={false}
  showLineNumbers={false}
/>

<Checkpoint client:only id="3-1" scroll={false} >
  ...well, let's do it then.

  ---
  <Portrait src="grocery">
  Good morning Adventurer, I'm glad you accepted my request.  
  My age is starting to show, and it's hard to keep up with the work here at the grocery store.  

  Your first task is to help me keep track of the inventory.  
  Please, follow me.
  </Portrait>

  You follow the owner to the back of the store, where he has crates full of vegetables.  
  Each crate has a label indicating its contents and a panel with a number.
  
  <Portrait src="grocery">
  See all these crates? They are magical boxes!  
  
  The number you see on each panel is the amount of vegetables stored, and it updates automatically. Pretty handy, right?  
  
  Unfortunately, only Programmers can mess with them, they are too complicated for people like me.  
  This is where you come in.  
  
  I often find that I need to check the total number of vegetables in the store, but having to add up the numbers by hand is tedious.  
  So, as a Programmer, could you find a way to automate this?
  
  I have this code thing that represents our magical crates and what's in them, check it out:

  </Portrait>
  
  <CodeQuestion 
id = "3-2"
question = "What's the total number of vegetables in the grocery?"
code = {`
let potatoes = 5;
let carrots = 4;
let onions = 2;

let total = ? + ? + ?;
`}
setup = {`
__VALUE__
if total == potatoes + carrots + onions {
  println!("potatoes + carrots + onions == {total}, great job!");
}
`}
validator = {(() => {
const almost = `
You're almost there! 
But you don't need to use "let" in this exercise.
`;
const copy = `
Copying each number isn't good enough.
You need to come up with a solution that works even if the numbers change.
Remember to use the magical properties of the crates!
`;
return `
  const answer = value.substring(value.lastIndexOf("=") + 1, value.length-1).replace(" ", "");
  return (
    answer.includes("?") && \`${replace}\` ||
    answer.includes("let") && \`${almost}\` ||
    answer.split("+").some((x) => Number(x)) && \`${copy}\` ||
    undefined
  );`
})()} />
</Checkpoint>

<Checkpoint id="3-2">
Great!
Now the grocer knows how many vegetables he has stored.

Next, he needs to create another magical box, to store **18 apples**.
He gives you a box with a panel and an empty label, and says that this should be enough to make it.

Then, looking at the box, he mutters: "`let`".
Once... Hearing? The word, the box starts to glow, and in the panel appears: "Please, fill the label with the name of the contents of the box and put the items inside".

The man then goes to attend a customer, leaving you to finish the work.

###### Create a magical box to store 18 apples!
```rust
let ? = ?;

# "__VALUE__".replace(" ", "") == "letapples=18;"
# println!("
# Well done, the box is now operative!
# ")
```
</Checkpoint>

# Hide next until exercise is completed
> Use svelte, read cookie specified by `until="cookie"` and if it doesn't exist don't show contents

Having created the box, you start walking to the counter to tell the Grocer your success, but then he shouts: "Hey, adventurer! Bring me two apples from the box please".

Okay, this shouldn't be difficult, just take two apples and... Huh? Why is your hand being stopped in the air?
You look at the panel, maybe something is wrong?
Indeed, the panel is red, and says: "Anti theft protection activated, if you want to change the contents of this box add the `mut` directive".

What? What does this mean? Why does a grocery store have anti theft magical boxes?

Knowing you are making the owner wait, you hurry and try to fix it.
The grocer before said `let` to activate the box, maybe you need to do the same with this `mut` thing?
###### Fix the box and take two apples from it!
```rust
? apples = 18;
apples = apples - 2;
# apples == 16 => "Once you say the magical words `let mut` the barrier sorrounding the box disappears, and you're able to take the apples, good job!"

# account for:
# - ? apples
# - "mut" only
# - "mut let" 
```
> `apples = apples - 2` means: "Make `apples` be its previous value minus two".
> It ends up translating to `apples = 18 - 2`.
>  
> If you want, you can use the shorthand `apples -= 2`, which would mean: "Substract 2 from the current value of apples".

# Hide next until exercise is completed

Having dispatched the customer, the owner comes carrying a normal-looking box full of apples, leaves it on the floor and tells you to add them to the magical one.
"There's **64 apples** there", he says.

Well, let's get to work.
###### Add 64 apples to the box! (complete the whole line)
```rust
let mut apples = 16;
?
# apples == 16 + 64 => "Perfect, apples = {apples}, now you know how to modify values!"
```

:::note[Being more technical...]
`let mut apples = 18` is meant to convey "let this mutable apples be 18",
where "mutable" means that it can be changed.

It may seem archaic, but `let` is a widely used term in mathematics.
 
Also, the magical boxes are called "variables" in programming, mostly for the same reason as `let`, because in mathematics it's very common to assign things to specific letters, and the field calls this letters "variables".

In Rust, variables are "immutable" by default (uncommon in other programming languages).
The reasoning behind this is that most of the time you use variables to store temporary values, and don't need to modify them directly.
:::

<Portrait src="grocery">
Thank you a lot for your help, young one.  
I'll tell the Adventurer's Guild about your excellent assistance, see you again!
</Portrait>

This seems like mission complete!  
Satisfied with your work, you return to the local inn, where you go to sleep early, to  be ready for whatever happens tomorrow.