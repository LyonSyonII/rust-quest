FROM rust:slim AS builder

WORKDIR /feedbacker
COPY . .
RUN cargo build --release


FROM alpine:latest

WORKDIR /feedbacker
COPY --from=builder /feedbacker/target/release/feedbacker ./

ENV PORT="9090"
ENV OUTPUT="./feedback.yml"
# ENV ALLOWED_ORIGINS=""

EXPOSE ${PORT}

ENTRYPOINT ["./feedbacker"]